-- FUNCTION: public.get_ticket_detail1(character varying)

-- DROP FUNCTION IF EXISTS public.get_ticket_detail1(character varying);

CREATE OR REPLACE FUNCTION public.get_ticket_detail1(
	ticketid character varying)
    RETURNS TABLE(id bigint, cf_tier_1_country_code character varying, cf_renewal_status text, cf_renewal_confirmation text, cf_contract_reviewed text, cf_reason_returned text, cf_resolution text, cf_po_obtained_legal timestamp without time zone, cf_contact_lead_source character varying, cf_salescrr_issue_resolved timestamp without time zone, cf_primary_ap_contact character varying, cf_visual_compliance_run_by text, cf_crr_rep text, cf_crr_corrections_required character varying, cf_returnrebook boolean, cf_payment_confirmation_attached text, cf_tier_1_country_name integer, cf_1st_contact_date timestamp without time zone, cf_email character varying, cf_submitted_for_processing timestamp without time zone, cf_rejected_to_rep timestamp without time zone, cf_returned_for_corrections timestamp without time zone, cf_order_sheet_processed timestamp without time zone, cf_record_type text, cf_upgrade_dollar_amount numeric, cf_total_sale_amount numeric, cf_month_one_amount numeric, cf_month_two_amount numeric, cf_month_three_amount numeric, cf_month_four_amount numeric, cf_month_five_amount numeric, cf_month_six_amount numeric, cf_month_seven_amount numeric, cf_month_eight_amount numeric, cf_month_nine_amount numeric, cf_month_ten_amount numeric, cf_month_eleven_amount numeric, cf_month_twelve_amount numeric, cf_fee_to_alliance_partner numeric, cf_contract_status text, cf_3rd_contact_date timestamp without time zone, cf_payment_method text, cf_bold_commissionable_amount numeric, cf_customer_invoice_details text, cf_stripe_order boolean, cf_year_one_contract_amount numeric, cf_case_resolution text, cf_sales_admin_correction_requested character varying, cf_date_agreement_effective timestamp without time zone, cf_date_agreement_expires date, cf_date_sent_to_customer timestamp without time zone, cf_date_estimate_sent_to_customer timestamp without time zone, cf_date_signed_by_customer timestamp without time zone, cf_case_car_rep character varying, cf_crr_split_amount numeric, cf_follow_up_date timestamp without time zone, cf_outstanding_amount numeric, cf_amount_collected_by_legal numeric, cf_payment_outcome text, cf_invoice_sent timestamp without time zone, cf_contract_complete_or_closed timestamp without time zone, cf_reason_for_no_contract character varying, cf_payment_obtained_legal timestamp without time zone, cf_review_site text, cf_order_info_needed character varying, cf_collection_legal_status text, cf_last_collections_contact timestamp without time zone, cf_total_invoice_amount numeric, cf_salescr_action_type text, cf_case_description character varying, cf_date_sent_to_jv timestamp without time zone, cf_date_fully_executed timestamp without time zone, cf_90_days_support timestamp without time zone, cf_weekly_call_day text, cf_last_ar_contact timestamp without time zone, cf_related_opp_account_name character varying, cf_related_opp_close_date timestamp without time zone, cf_on_hold_details character varying) 
    LANGUAGE 'plpgsql'
    COST 100
    VOLATILE PARALLEL UNSAFE
    ROWS 1000

AS $BODY$

begin

	return query 
SELECT ticket_detail.id,
    ticket_detail.cf_tier_1_country_code,
    ticket_detail.cf_renewal_status,
    ticket_detail.cf_renewal_confirmation,
    ticket_detail.cf_contract_reviewed,
    ticket_detail.cf_reason_returned,
    ticket_detail.cf_resolution,
    ticket_detail.cf_po_obtained_legal,
    ticket_detail.cf_contact_lead_source,
    ticket_detail.cf_salescrr_issue_resolved,
    ticket_detail.cf_primary_ap_contact,
    ticket_detail.cf_visual_compliance_run_by,
    ticket_detail.cf_crr_rep,
    ticket_detail.cf_crr_corrections_required,
    ticket_detail.cf_returnrebook,
    ticket_detail.cf_payment_confirmation_attached,
    ticket_detail.cf_tier_1_country_name,
    ticket_detail.cf_1st_contact_date,
    ticket_detail.cf_email,
    ticket_detail.cf_submitted_for_processing,
    ticket_detail.cf_rejected_to_rep,
    ticket_detail.cf_returned_for_corrections,
    ticket_detail.cf_order_sheet_processed,
    ticket_detail.cf_record_type,
    ticket_detail.cf_upgrade_dollar_amount,
    ticket_detail.cf_total_sale_amount,
    ticket_detail.cf_month_one_amount,
    ticket_detail.cf_month_two_amount,
    ticket_detail.cf_month_three_amount,
    ticket_detail.cf_month_four_amount,
    ticket_detail.cf_month_five_amount,
    ticket_detail.cf_month_six_amount,
    ticket_detail.cf_month_seven_amount,
    ticket_detail.cf_month_eight_amount,
    ticket_detail.cf_month_nine_amount,
    ticket_detail.cf_month_ten_amount,
    ticket_detail.cf_month_eleven_amount,
    ticket_detail.cf_month_twelve_amount,
    ticket_detail.cf_fee_to_alliance_partner,
    ticket_detail.cf_contract_status,
    ticket_detail.cf_3rd_contact_date,
    ticket_detail.cf_payment_method,
    ticket_detail.cf_bold_commissionable_amount,
    ticket_detail.cf_customer_invoice_details,
    ticket_detail.cf_stripe_order,
    ticket_detail.cf_year_one_contract_amount,
    ticket_detail.cf_case_resolution,
    ticket_detail.cf_sales_admin_correction_requested,
    ticket_detail.cf_date_agreement_effective,
    ticket_detail.cf_date_agreement_expires,
    ticket_detail.cf_date_sent_to_customer,
    ticket_detail.cf_date_estimate_sent_to_customer,
    ticket_detail.cf_date_signed_by_customer,
    ticket_detail.cf_case_car_rep,
    ticket_detail.cf_crr_split_amount,
    ticket_detail.cf_follow_up_date,
    ticket_detail.cf_outstanding_amount,
    ticket_detail.cf_amount_collected_by_legal,
    ticket_detail.cf_payment_outcome,
    ticket_detail.cf_invoice_sent,
    ticket_detail.cf_contract_complete_or_closed,
    ticket_detail.cf_reason_for_no_contract,
    ticket_detail.cf_payment_obtained_legal,
    ticket_detail.cf_review_site,
    ticket_detail.cf_order_info_needed,
    ticket_detail.cf_collection_legal_status,
    ticket_detail.cf_last_collections_contact,
    ticket_detail.cf_total_invoice_amount,
    ticket_detail.cf_salescr_action_type,
    ticket_detail.cf_case_description,
    ticket_detail.cf_date_sent_to_jv,
    ticket_detail.cf_date_fully_executed,
    ticket_detail.cf_90_days_support,
    ticket_detail.cf_weekly_call_day,
    ticket_detail.cf_last_ar_contact,
    ticket_detail.cf_related_opp_account_name,
    ticket_detail.cf_related_opp_close_date,
    ticket_detail.cf_on_hold_details
    
    
   FROM dblink('host=35.236.243.204 port=5432 user=salesopreaduser password=b9c!l9M4#zQ dbname=org-538'::text, 
			   
			   format('SELECT t.id,
    fields."1047" AS cf_tier_1_country_code,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1050") AS cf_renewal_status,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1060") AS cf_renewal_confirmation,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1051") AS cf_contract_reviewed,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1296") AS cf_reason_returned,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1021") AS cf_resolution,
    fields."1320" AS cf_po_obtained_legal,
    contact."1351" AS cf_contact_lead_source,
    fields."1313" AS cf_salescrr_issue_resolved,
    fields."1314" AS cf_primary_ap_contact,
  
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1144") AS cf_visual_compliance_run_by,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1145") AS cf_crr_rep,
    fields."1146" AS cf_crr_corrections_required,
    fields."1147" AS cf_returnrebook,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1149") AS cf_payment_confirmation_attached,
    (case when fields."1048" is null or fields."1048" = ''0'' then 0 else 1 end) AS cf_tier_1_country_name,
    fields."1382" AS cf_1st_contact_date,
    fields."1137" AS cf_email,
    fields."1153" AS cf_submitted_for_processing,
    fields."1155" AS cf_rejected_to_rep,
    fields."1156" AS cf_returned_for_corrections,
    fields."1160" AS cf_order_sheet_processed,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1046") AS cf_record_type,
    fields."1179" AS cf_upgrade_dollar_amount,
    fields."1180" AS cf_total_sale_amount,
    fields."1174" AS cf_month_one_amount,
	fields."1178" as cf_month_two_amount,

fields."1182" as cf_month_three_amount,

fields."1186" as cf_month_four_amount,

fields."1190" as cf_month_five_amount,

fields."1192" as cf_month_six_amount,

fields."1195" as cf_month_seven_amount,

fields."1198" as cf_month_eight_amount,

fields."1204" as cf_month_nine_amount,

fields."1206" as cf_month_ten_amount,

fields."1207" as cf_month_eleven_amount,

fields."1210" as cf_month_twelve_amount,

    fields."1177" AS cf_fee_to_alliance_partner,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1337") AS cf_contract_status,
    fields."1385" AS cf_3rd_contact_date,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1227") AS cf_payment_method,
    fields."1240" AS cf_bold_commissionable_amount,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1232") AS cf_customer_invoice_details,
    fields."1233" AS cf_stripe_order,
    fields."1342" AS cf_year_one_contract_amount,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1247") AS cf_case_resolution,
  ( SELECT array_to_string(array_agg(field_option.option_value),'';'')
           FROM field_option
          WHERE field_option.id = ANY(fields."1238") limit 1) AS cf_sales_admin_correction_requested,
    fields."1249" AS cf_date_agreement_effective,
    fields."1254" AS cf_date_agreement_expires,
    fields."1255" AS cf_date_sent_to_customer,
    fields."1256" AS cf_date_estimate_sent_to_customer,
    fields."1257" AS cf_date_signed_by_customer,
    fields."1250" AS cf_case_car_rep,
    fields."1167" AS cf_crr_split_amount,
    fields."1262" AS cf_follow_up_date,
    fields."1328" AS cf_outstanding_amount,
    fields."1322" AS cf_amount_collected_by_legal,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1323") AS cf_payment_outcome,
    fields."1316" AS cf_invoice_sent,
    fields."1345" AS cf_contract_complete_or_closed,
    fields."1546" AS cf_reason_for_no_contract,
    fields."1321" AS cf_payment_obtained_legal,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1399") AS cf_review_site,
    ( SELECT array_to_string(array_agg(field_option.option_value),'';'')
           FROM field_option
          WHERE field_option.id = ANY(fields."1334") limit 1) AS cf_order_info_needed,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1317") AS cf_collection_legal_status,
    fields."1319" AS cf_last_collections_contact,
    fields."1327" AS cf_total_invoice_amount,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1340") AS cf_salescr_action_type,
    fields."1263" AS cf_case_description,
    fields."1260" AS cf_date_sent_to_jv,
    fields."1261" AS cf_date_fully_executed,
    fields."1268" AS cf_90_days_support,
    ( SELECT field_option.option_value
           FROM field_option
          WHERE field_option.id = fields."1279") AS cf_weekly_call_day,
    fields."1308" AS cf_last_ar_contact,
    fields."1581" AS cf_related_opp_account_name,
    fields."1281" AS cf_related_opp_close_date,
    fields."1283" AS cf_on_hold_details

   FROM (select * from ticket_detail where  id in (%s) and is_active=true ) t
     LEFT JOIN brand b ON b.org_brand_id = t.org_brand_id
     LEFT JOIN ticket_status tst ON tst.id = t.ticket_status_id
     LEFT JOIN ticket_source tso ON tso.id = t.ticket_source_id
     LEFT JOIN users requester ON requester.id = t.requested_by
     LEFT JOIN users replied ON replied.id = t.last_replied_by_id
     LEFT JOIN user_type rut ON rut.id = t.last_replied_by_user_type_id
     LEFT JOIN users creator ON creator.id = t.created_by
     LEFT JOIN users modifier ON modifier.id = t.last_modified_by
     LEFT JOIN ticket_priority tp ON tp.id = t.ticket_priority_id
     LEFT JOIN users assignee ON assignee.id = t.assigned_to_user_id
     LEFT JOIN user_group aug ON aug.id = t.assigned_to_group_id
     LEFT JOIN contact_group cg ON cg.id = t.contact_group_id
     LEFT JOIN users closed ON closed.id = t.closed_by
     LEFT JOIN agent ON t.assigned_to_user_id = agent.user_id
	 LEFt JOIN users owner on agent.user_id = owner.id and owner.user_type_id = 2
 LEFT JOIN ticket_update tu ON tu.ticket_id = t.id AND tu.is_first_update = true
     LEFT JOIN ticket_update_type tut ON tut.id = tu.ticket_update_type_id,
     jsonb_to_record(t.custom_fields) fields("1001" numeric(36,6), "1522" character varying, "1489" character varying, "1490" date, "1336" character varying, "1540" character varying, "1491" date, "1492" numeric(36,6), "1493" bigint, "1494" date, "1092" bigint,  "1497" date, "1103" character varying, "1063" bigint, "1498" boolean, "1141" bigint, "1503" character varying, "1093" timestamp without time zone, "1499" bigint, "1500" boolean, "1495" date,   "1504" date, "1618" decimal(36,6), "1619" decimal(36,6),   "1510" date, "1623" int, "1512" bigint, "1513" bigint, "1514" date, "1515" date, "1044" character varying, "1066" timestamp without time zone, "1052" bigint, "1453" bigint, "1299" bigint, "1301" timestamp without time zone, "1501" character varying,  "1507" date, "1125" character varying, "1366" character varying, "1508" date,  "1516" boolean, "1517" date, "1519" bigint, "1520" bigint, "1521" date, "1151" timestamp without time zone,  "1496" integer[], "1373" character varying, "1226" bigint, "1509" date, "1384" timestamp without time zone, "1248" bigint, "1300" character varying, "1277" character varying, "1388" bigint, "1593" int[], "1400" character varying, "1142" timestamp without time zone, "1370" bigint, "1372" bigint, "1042" character varying, "1480" boolean, "1479" numeric(36,6), "1483" character varying, "1009" bigint, "1485" character varying, "1259" timestamp without time zone, "1326" timestamp without time zone, "1102" bigint, "1310" bigint, "1344" timestamp without time zone, "1347" timestamp without time zone, "1343" numeric(36,6), "1330" timestamp without time zone, "1338" timestamp without time zone,  "1010" character varying, "1139" character varying, "1542" character varying, "1111" bigint, "1005" bigint, "1094" bigint, "1544" character varying, "1404" timestamp without time zone, "1095" integer[], "1118" character varying, "1108" character varying, "1543" character varying, "1008" bigint, "1025" bigint, "1049" character varying, "1043" character varying, "1069" bigint, "1380" character varying, "1622" character varying, "1068" numeric(36,6), "1332" character varying, "1018" character varying, "1020" character varying, "1294" character varying, "1011" character varying, "1315" character varying, "1318" bigint, "1065" timestamp without time zone, "1047" character varying, "1050" bigint, "1060" bigint, "1051" bigint, "1296" bigint, "1021" bigint, "1320" timestamp without time zone, "1351" character varying, "1313" timestamp without time zone, "1314" character varying, "1054" character varying, "1121" timestamp without time zone, "1123" character varying, "1144" bigint, "1145" bigint, "1146" character varying, "1147" boolean, "1149" bigint, "1048" character varying, "1382" timestamp without time zone, "1137" character varying, "1169" character varying, "1170" bigint, "1153" timestamp without time zone, "1155" timestamp without time zone, "1156" timestamp without time zone, "1160" timestamp without time zone, "1046" bigint, "1179" numeric(36,6), "1180" numeric(36,6), "1174" numeric(36,6), "1177" numeric(36,6), "1337" bigint, "1385" timestamp without time zone, "1227" bigint, "1165" integer[], "1240" numeric(36,6), "1232" bigint, "1233" boolean, "1243" character varying, "1342" numeric(36,6), "1247" bigint, "1241" character varying, "1238" integer[], "1249" timestamp without time zone, "1254" date, "1255" timestamp without time zone, "1256" timestamp without time zone, "1257" timestamp without time zone, "1250" character varying, "1167" numeric(36,6), "1262" timestamp without time zone, "1328" numeric(36,6), "1322" numeric(36,6), "1323" bigint, "1316" timestamp without time zone, "1345" timestamp without time zone, "1546" character varying, "1321" timestamp without time zone, "1399" bigint, "1334" integer[], "1317" bigint, "1319" timestamp without time zone, "1327" numeric(36,6), "1340" bigint, "1263" character varying, "1260" timestamp without time zone, "1261" timestamp without time zone, "1268" timestamp without time zone, "1279" bigint, "1291" character varying, "1285" bigint, "1286" bigint, "1287" character varying, "1288" timestamp without time zone, "1308" timestamp without time zone, "1581" character varying, "1281" timestamp without time zone, "1283" character varying, "1309" bigint, "1430" timestamp without time zone, "1245" bigint,  "1307" character varying, "1350" character varying, "1311" timestamp without time zone, "1625" decimal(36,6), "1362" character varying, "1355" character varying, "1352" timestamp without time zone, "1365" character varying, "1367" numeric(36,6), "1354" character varying, "1335" character varying, "1394" timestamp without time zone, "1427" numeric(36,6), "1432" bigint, "1434" bigint, "1435" timestamp without time zone, "1436" bigint, "1588" character varying, "1371" bigint, "1418" timestamp without time zone, "1589" character varying, "1449" bigint, "1454" timestamp without time zone, "1459" date, "1460" boolean, "1461" date, "1462" timestamp without time zone, "1440" numeric(36,6), "1487" character varying, "1312" bigint, "1602" decimal(36,6), "1518" bigint,"1006" int,"1178" numeric(36,6), "1182" numeric(36,6), "1186" numeric(36,6), "1190" numeric(36,6), "1192" numeric(36,6), "1195" numeric(36,6), "1198" numeric(36,6), "1204" numeric(36,6), "1206" numeric(36,6), "1207" numeric(36,6), "1210" numeric(36,6),"1535" timestamp without time zone, "1536" timestamp without time zone,"1452" bigint,"1591" timestamp , "1592" timestamp,"11" varchar,"1626" varchar,"1431" timestamp,"1433" boolean,"1441" bigint,"1442" bigint,"1443" bigint,"1587" varchar

,	 "1175" decimal(36,6),
"1617" bigint,
"1184" varchar,
"1183" bigint,
"1329" varchar,
"1150" varchar,
"1191" bigint,
"1188" timestamp,
"1573" varchar,
"1194" decimal(36,6),
"1205" decimal(36,6),
"1200" decimal(36,6),
"1199" decimal(36,6),
"1203" decimal(36,6),
"1202" decimal(36,6),
"1201" decimal(36,6),
"1197" decimal(36,6),
"1196" decimal(36,6),
"1225" bigint,
"1239" varchar,
"1237" bigint,
"1236" bigint,
"1360" varchar,
"1356" varchar,
"1358" varchar,
"1357" varchar,
"1353" timestamp,
"1361" varchar,
"1574" varchar,
"1208" varchar,
"1176" decimal(36,6),
"1553" varchar,
"1552" varchar,
"1193" int[],
"1554" varchar,
"1561" varchar,
"1559" varchar,
"1557" varchar,
"1558" varchar,
"1560" varchar,
"1563" varchar,
"1562" varchar,
"1564" varchar,
"1565" varchar,
"1572" varchar,
"1571" varchar,
"1575" varchar,
"1576" varchar,
"1578" varchar,
"1555" varchar,
"1577" varchar,
"1556" varchar,
"1189" timestamp,
"1173" bigint,
"1172" bigint,
"1171" bigint,
"1211" bigint,
"1228" bigint,
"1023" varchar,
"1024" date,
"1026" date,
"1027" bigint,
"1028" boolean,
"1029" varchar,
"1030" varchar,
"1035" varchar,
"1036" varchar,
"1037" varchar,
"1038" varchar,
"1039" varchar,
"1040" varchar,
"1041" varchar,
"7" varchar,
"8" varchar,
"19" varchar,
"6" bigint,
"41" varchar,
"9" bigint,
"35" varchar,
"21" varchar,
"10" bigint,
"12" varchar,
"13" varchar,
"37" varchar,
"1013" boolean,
"1015" varchar,
"1017" date,
"1019" bigint,
"1106" varchar,
"1594" varchar,
"1603" varchar,
"1293" varchar,
"1295" varchar,
"1379" varchar,
"1484" bigint,
																												   "1611" varchar,
"24" varchar,
"1107" bigint,
"1143" bigint,
"1596" date,
"1251" varchar,
"1252" varchar,
"1253" varchar,
"1258" bigint,
"1265" varchar,
"1266" varchar,
"1267" varchar,
"1269" timestamp,
"1270" decimal(36,6),
"1271" decimal(36,6),
"1278" bigint,
"1284" timestamp,
"1304" timestamp,
"1598" varchar,
"1599" varchar,
"1377" varchar,
"1383" bigint,
"1386" bigint,
"1387" timestamp,
"1390" varchar,
"1391" varchar,
"1392" bigint,
"1393" varchar,
"1397" varchar,
"1398" varchar,
"1401" timestamp,
"1402" timestamp,
"1403" bigint,
"1405" varchar,
"1419" varchar,
"1420" bigint,
"1421" bigint,
"1422" bigint,
"1424" bigint,
"1425" varchar,
"1429" decimal(36,6),
"1604" varchar,
"1445" decimal(36,6),
"1605" varchar,
"1464" date,
"1465" varchar,
"1466" varchar,
"1467" varchar,
"1468" varchar,
"1469" varchar,
"1472" varchar,
"1473" bigint,
"1474" bigint,
"1475" bigint,
"1476" date,
"1477" bigint,
"1481" varchar,
"1624" decimal(36,6),
"1606" varchar,
"1525" timestamp,
"1527" decimal(36,6),
"1528" decimal(36,6),
"1529" varchar,
"1531" varchar,
"1533" bigint,
"1534" decimal(36,6),
"1532" varchar,
"1547" varchar,
"1548" varchar,
"1524" bigint,
"1607" varchar,
"1608" varchar,
"1523" varchar,
"1530" varchar,
"1526" varchar,
"1609" varchar,
"1549" varchar,
"1610" varchar,
"1566" varchar,
"1567" varchar,
"1568" varchar,
"1569" varchar,
"1570" varchar,
"1579" varchar,
"1580" varchar,
"1584" varchar,
"1585" varchar,
"1586" varchar,
"1612" varchar,
"1613" varchar,
"1614" varchar,
"1235" bigint,
"1213" decimal(36,6))
	  LEFT Join users carrep on carrep.email=fields."1335",
     jsonb_to_record(cg.custom_fields) contactgroup("1170" bigint,
"1044" varchar,
"1058" boolean,
"1059" timestamp,
"1064" bigint,
"1071" bigint,
"1074" timestamp,
"1079" varchar,
"1080" varchar,
"1081" varchar,
"1083" varchar,
"1084" varchar,
"1085" varchar,
"1087" varchar,
"1088" varchar,
"22" varchar,
"29" varchar,
"30" varchar,
"14" varchar,
"15" varchar[],
"34" varchar,
"1101" bigint,
"1550" varchar,
"1242" varchar,
"1291" varchar,
"1292" varchar,
"1336" varchar,
"1363" bigint,
"1551" varchar,
"1535" date,
"1583" varchar )
	,jsonb_to_record(requester.custom_fields) contact("1626" varchar,
"1023" varchar,
"1024" date,
"1025" bigint,
"1026" date,
"1027" bigint,
"1028" boolean,
"1029" varchar,
"1030" varchar,
"1035" varchar,
"1036" varchar,
"1037" varchar,
"1038" varchar,
"1039" varchar,
"1040" varchar,
"1041" varchar,
"7" varchar,
"8" varchar,
"19" varchar,
"11" varchar,
"6" bigint,
"41" varchar,
"9" bigint,
"35" varchar,
"10" bigint,
"12" varchar,
"13" varchar,
"37" varchar,
"1013" boolean,
"1015" varchar,
"1017" date,
"1018" varchar,
"1019" bigint,
"1020" varchar,
"1106" varchar,
"1594" varchar,
"1603" varchar,
"1293" varchar,
"1295" varchar,
"1351" varchar,
"1379" varchar,
"1380" bigint,
"1484" bigint)	  
			   ',ticketid)) as 
			   ticket_detail(
			   id bigint,
			  
 cf_tier_1_country_code character varying,
 cf_renewal_status text,
 cf_renewal_confirmation text,
 cf_contract_reviewed text,
 cf_reason_returned text,
 cf_resolution text,
 cf_po_obtained_legal timestamp without time zone,
 cf_contact_lead_source character varying,
 cf_salescrr_issue_resolved timestamp without time zone,
 cf_primary_ap_contact character varying,
 cf_visual_compliance_run_by text,
 cf_crr_rep text,
 cf_crr_corrections_required character varying,
 cf_returnrebook boolean,
 cf_payment_confirmation_attached text,
 cf_tier_1_country_name integer,
 cf_1st_contact_date timestamp without time zone,
 cf_email character varying,
 cf_submitted_for_processing timestamp without time zone,
 cf_rejected_to_rep timestamp without time zone,
 cf_returned_for_corrections timestamp without time zone,
 cf_order_sheet_processed timestamp without time zone,
 cf_record_type text,
 cf_upgrade_dollar_amount numeric(36,6),
 cf_total_sale_amount numeric(36,6),
 cf_month_one_amount numeric(36,6),
 cf_month_two_amount numeric(36,6),
 cf_month_three_amount numeric(36,6),
 cf_month_four_amount numeric(36,6),
 cf_month_five_amount numeric(36,6),
 cf_month_six_amount numeric(36,6),
 cf_month_seven_amount numeric(36,6),
 cf_month_eight_amount numeric(36,6),
 cf_month_nine_amount numeric(36,6),
 cf_month_ten_amount numeric(36,6),
 cf_month_eleven_amount numeric(36,6),
 cf_month_twelve_amount numeric(36,6),
 cf_fee_to_alliance_partner numeric(36,6),
 cf_contract_status text,
 cf_3rd_contact_date timestamp without time zone,
 cf_payment_method text,
 cf_bold_commissionable_amount numeric(36,6),
 cf_customer_invoice_details text,
 cf_stripe_order boolean,
 cf_year_one_contract_amount numeric(36,6),
 cf_case_resolution text,
 cf_sales_admin_correction_requested varchar,
 cf_date_agreement_effective timestamp without time zone,
 cf_date_agreement_expires date,
 cf_date_sent_to_customer timestamp without time zone,
 cf_date_estimate_sent_to_customer timestamp without time zone,
 cf_date_signed_by_customer timestamp without time zone,
 cf_case_car_rep character varying,
 cf_crr_split_amount numeric(36,6),
 cf_follow_up_date timestamp without time zone,
 cf_outstanding_amount numeric(36,6),
 cf_amount_collected_by_legal numeric(36,6),
 cf_payment_outcome text,
 cf_invoice_sent timestamp without time zone,
 cf_contract_complete_or_closed timestamp without time zone,
 cf_reason_for_no_contract character varying,
 cf_payment_obtained_legal timestamp without time zone,
 cf_review_site text,
 cf_order_info_needed varchar,
 cf_collection_legal_status text,
 cf_last_collections_contact timestamp without time zone,
 cf_total_invoice_amount numeric(36,6),
 cf_salescr_action_type text,
 cf_case_description character varying,
 cf_date_sent_to_jv timestamp without time zone,
 cf_date_fully_executed timestamp without time zone,
 cf_90_days_support timestamp without time zone,
 cf_weekly_call_day text,
 cf_last_ar_contact timestamp without time zone,
 cf_related_opp_account_name character varying,
 cf_related_opp_close_date timestamp without time zone,
 cf_on_hold_details character varying)

 ;

	end;
$BODY$;

ALTER FUNCTION public.get_ticket_detail1(character varying)
    OWNER TO bolddeskuser;
